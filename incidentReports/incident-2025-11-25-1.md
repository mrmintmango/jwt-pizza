# Incident: 2025-11-25 12-57-16

## Summary
Between the hour of 12:53 and 12:57 on 11/25/2025, 2 active users encountered pizza creation failures. The event was triggered by a problem with the pizza factory at 12:53. The cause of the issue is still
unknown, due to the pizza factory code being restricted. The event was detected by Grafana. The team started working on the event within a minute thanks to the firing of appropriate warnings. This High level
threat affected 100% of users since there were only two active users at the time. 

## Detection
The team was able to detect the threat very quickly, though not as quick as could have been. The warning for pizza failures would go off at a routine interval due to the traffic script simulating occasional
pizza failures. The warning would then resolve itsef and send a resolution message declaring that things were normal again. Even though the setting was changed to not notify as often, the warning would
continue its frequent behavior. Because of this, when the pizza failures began, the warning was somewhat ignored because of the assumption that the resolution message would soon appear. After a minute of no
resolution message, the issue was looked into and thne quickly resolved after looking into the logs for further failure details. This warning will be improved for more accurate notifications in the near future. 

## Impact
For the 3 minutes or so of pizza creation failures on the before mentioned date, approximately two customers were affected and were unable to purchase pizzas. This is a small percentage of total jwt pizza
users. No support tickets or social media posts resulted from this incident. 

## Timeline
- _12:57:25_ - User mrmintmango added status update: Increase in pizza purchase failures
- _12:57:25_ - User mrmintmango declared an incident
- _12:57:51_ - User mrmintmango noted: Was able to calm the chaos by following a link!
- _12:59:22_ - User mrmintmango marked incident Resolved with Summary: Pizza purchase failures began rising. Luckily the chaos monkey left an early Christmas gift, a link in the response body that ended the chaos. Pizza is back on the menu!

## Response
After recieving a Grafana alert, Ruben (mrmintmango) came online and began debugging and searching the logs for issues. After quickly resolving the problem by following a handy link, he then created an
incident report on grafana and filled it in with simple steps taken to resolve the issue and what the problem was. 

## Root Cause
A hidden case in the code where if the response from the jwt pizza factory was not ok, then the pizza creation process would fail. 

## Resolution
The services were restored by following a link found in the body of the failed pizza creation response. After going to the link, the system status returned to calm and the incident was resolved. 

## Prevention
No other incidents have occured in the past with the same root cause. 

## Action Items
1. Adjust the settings on the pizza creation failure grafana alert to be more accurate
2. Add better error handeling in the pizza creation process
3. Ask the SoPro developers what they did in the jwt Pizza Factory and how to fix it. 
